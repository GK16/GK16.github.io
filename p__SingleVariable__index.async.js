"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[308],{20267:function(Fe,D,i){i.r(D),i.d(D,{default:function(){return Oe}});var X=i(5574),b=i.n(X),q=i(68400),_=i.n(q),ee=i(83945),te=i(75072),ae=i.n(te),re=i(92556),$=i(92195),j=i(38059),s=i(67294),ne=i(97857),T=i.n(ne),R=i(22836),E=i(59658),w=i(4322),H=i(24770),A=i(27690),le=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)l.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(n[t[a]]=e[t[a]]);return n},ie=(0,s.forwardRef)(function(e,l){var n=e.chartRef,t=e.style,a=t===void 0?{height:"inherit"}:t,m=e.className,c=e.loading,g=e.loadingTemplate,v=e.errorTemplate,d=le(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),u=(0,E.Z)(R.Bar,d),o=u.chart,f=u.container;return(0,s.useEffect)(function(){(0,w.J)(n,o.current)},[o.current]),(0,s.useImperativeHandle)(l,function(){return{getChart:function(){return o.current}}}),s.createElement(H.Z,{errorTemplate:v},c&&s.createElement(A.Z,{loadingTemplate:g,theme:e.theme}),s.createElement("div",{className:m,style:a,ref:f}))}),oe=ie,r=i(85893),se=function(l){var n=l.form,t=l.currAttr,a=l.stat,m={xField:"value",yField:"type",legend:{position:"top-left"},barBackground:{style:{fill:"rgba(0,0,0,0.1)"}},maxBarWidth:40,locale:"en-US"};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(oe,T()(T()({},m),{},{data:a,meta:{type:{alias:"Attribute"},value:{alias:"Number"}}}))})},ce=se,G=i(95649),L=i(11550),x=i(55375),de=function(l){var n=l.form,t=l.calcu,a=l.setShow,m=$.Z.useToken(),c=m.token.colorBgContainer,g=x.N.filter(function(y){return y.type==="categorical"}).map(function(y){return{value:y.key,label:y.label}}),v=(0,s.useState)(g),d=b()(v,2),u=d[0],o=d[1],f=(0,s.useState)(!1),h=b()(f,2),S=h[0],N=h[1],B=j.Z.useWatch("data",n),M=function(C){if(n.setFieldsValue({data:null}),!C){o([]),N(!0);return}var P=[];N(!1);for(var p in x.N)x.N[p].type==C&&P.push({value:x.N[p].key,label:x.N[p].label});o(P)},z=function(){n.setFieldsValue({type:null,data:null}),o([]),a(!1)},J=function(){if(!B){console.log("errorerror"),n.validateFields();return}t(B)};return(0,r.jsx)("div",{style:{padding:24,minHeight:60,background:c,borderRadius:8,margin:36,marginTop:0,marginBottom:24},children:(0,r.jsxs)(j.Z,{form:n,layout:"inline",initialValues:{type:"categorical",data:"PEEDUCA"},children:[(0,r.jsx)(j.Z.Item,{name:"type",label:"Type",rules:[{required:!0}],children:(0,r.jsx)(G.Z,{options:[{value:"categorical",label:"Categorical"},{value:"numeric",label:"Numeric",disabled:!0}],style:{width:160},onChange:M,allowClear:!0,placeholder:"Select a data type"})}),(0,r.jsx)(j.Z.Item,{name:"data",label:"Data",rules:[{required:!0}],children:(0,r.jsx)(G.Z,{options:u,style:{width:240},disabled:S,allowClear:!0,placeholder:"Select an attribute"})}),(0,r.jsxs)("div",{style:{marginLeft:"auto"},children:[(0,r.jsx)(L.Z,{style:{display:"inline-block",marginRight:20},onClick:z,children:"Reset"}),(0,r.jsx)(j.Z.Item,{style:{display:"inline-block"},children:(0,r.jsx)(L.Z,{type:"primary",onClick:J,children:"Generate"})})]})]})})},ue=de,me=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)l.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(n[t[a]]=e[t[a]]);return n},ve=(0,s.forwardRef)(function(e,l){var n=e.chartRef,t=e.style,a=t===void 0?{height:"inherit"}:t,m=e.className,c=e.loading,g=e.loadingTemplate,v=e.errorTemplate,d=me(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),u=(0,E.Z)(R.Pie,d),o=u.chart,f=u.container;return(0,s.useEffect)(function(){(0,w.J)(n,o.current)},[o.current]),(0,s.useImperativeHandle)(l,function(){return{getChart:function(){return o.current}}}),s.createElement(H.Z,{errorTemplate:v},c&&s.createElement(A.Z,{loadingTemplate:g,theme:e.theme}),s.createElement("div",{className:m,style:a,ref:f}))}),fe=ve,ge=function(l){var n=l.stat,t=function(c,g,v){var d=(0,R.measureTextWidth)(g,v),u=d.width,o=d.height,f=c/2,h=1;c<u&&(h=Math.min(Math.sqrt(Math.abs(Math.pow(f,2)/(Math.pow(u/2,2)+Math.pow(o,2)))),1));var S="width:".concat(c,"px;");return`
        <div style="
            `.concat(S,`;
            font-size:`).concat(h,`em;
            line-height:`).concat(h<1?1:"inherit",`;
            ">`).concat(g,"</div>")},a={appendPadding:10,angleField:"value",colorField:"type",radius:1,innerRadius:.64,meta:{value:{formatter:function(c){return"".concat(c)}}},statistic:{title:{offsetY:-4,style:{fontSize:"12px"},customHtml:function(c,g,v){var d=c.getBoundingClientRect(),u=d.width,o=d.height,f=Math.sqrt(Math.pow(u/2,2)+Math.pow(o/2,2)),h=v?v.type:"Sum";return t(f,h,{fontSize:16})}},content:{offsetY:4,style:{fontSize:"24px"},customHtml:function(c,g,v,d){var u=c.getBoundingClientRect(),o=u.width,f=v?"".concat(v.value):"".concat(d.reduce(function(h,S){return h+S.value},0));return t(o,f,{fontSize:16})}}},interactions:[{type:"element-selected"},{type:"element-active"},{type:"pie-statistic-active"}]};return(0,r.jsx)(fe,T()(T()({},a),{},{data:n,label:{type:"inner",offset:"-50%",style:{textAlign:"center"},autoRotate:!1,content:"{value}"}}))},he=ge,ye=function(e,l){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)l.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(n[t[a]]=e[t[a]]);return n},pe=(0,s.forwardRef)(function(e,l){var n=e.chartRef,t=e.style,a=t===void 0?{height:"inherit"}:t,m=e.className,c=e.loading,g=e.loadingTemplate,v=e.errorTemplate,d=ye(e,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),u=(0,E.Z)(R.Column,d),o=u.chart,f=u.container;return(0,s.useEffect)(function(){(0,w.J)(n,o.current)},[o.current]),(0,s.useImperativeHandle)(l,function(){return{getChart:function(){return o.current}}}),s.createElement(H.Z,{errorTemplate:v},c&&s.createElement(A.Z,{loadingTemplate:g,theme:e.theme}),s.createElement("div",{className:m,style:a,ref:f}))}),xe=pe,Se=function(l){var n=l.yearStat;R.G2.registerInteraction("element-link",{start:[{trigger:"interval:mouseenter",action:"element-link-by-color:link"}],end:[{trigger:"interval:mouseleave",action:"element-link-by-color:unlink"}]});var t={locale:"en-US",autoFit:!0,xField:"year",yField:"value",seriesField:"type",isPercent:!0,isStack:!0,meta:{value:{min:0,max:1}},label:{position:"middle",content:function(m){return"".concat((m.value*100).toFixed(2),"%")},style:{fill:"#fff"}},tooltip:!1,interactions:[{type:"element-highlight-by-color"},{type:"element-link"}]};return(0,r.jsx)(xe,T()(T()({},t),{},{data:n}))},be=Se,I=i(43045),je=i(19251),Te=i(94589),k,Be=Te.ZP.div(k||(k=_()([`
  padding: 24,
    minHeight: 60,
    background: colorBgContainer,
    borderRadius: 8,
    margin: 36,
    marginTop: 0,
    marginBottom: 24,
    display: 'flex',
`]))),Ce=function(){var l=$.Z.useToken(),n=l.token.colorBgContainer,t=j.Z.useForm(),a=b()(t,1),m=a[0],c=(0,s.useState)(!1),g=b()(c,2),v=g[0],d=g[1],u=(0,s.useState)([]),o=b()(u,2),f=o[0],h=o[1],S=(0,s.useState)([]),N=b()(S,2),B=N[0],M=N[1],z=function(y){var C={};for(var P in x.N)if(x.N[P].key===y){C=x.N[P];break}console.log("pattern",C);var p={},Z={};for(var W in I){var U,Re=I[W][y],O=(((U=C)===null||U===void 0?void 0:U.entries)||{})[Re],F=O!=null&&O.name?O==null?void 0:O.name:"N/A";p.hasOwnProperty(F)||(p[F]=0),p[F]++;var K=I[W].TUYEAR||"",V=K+F||"N/A";Z.hasOwnProperty(V)||(Z[V]={year:K,type:F,value:0}),Z[V].value++}var Ne=Object.keys(Z).map(function(Ze){return Z[Ze]});M(Ne);var Y=[];for(var Q in p){var Pe={type:Q,value:p[Q]};Y.push(Pe)}console.log("data",Y),h(Y),d(!0)};return(0,r.jsx)(ee.ZP,{locale:ae(),children:(0,r.jsxs)("div",{children:[(0,r.jsx)(re._z,{header:{title:"Single Variable Grouping"}}),(0,r.jsx)(ue,{form:m,calcu:z,setShow:d}),v?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{padding:24,minHeight:60,background:n,borderRadius:8,margin:36,marginTop:0,marginBottom:24,display:"flex"},children:[(0,r.jsx)("div",{style:{display:"inline-block",flex:1},children:(0,r.jsx)(ce,{form:m,stat:f})}),(0,r.jsx)("div",{style:{display:"inline-block",width:400,marginLeft:36},children:(0,r.jsx)(he,{stat:f})})]}),(0,r.jsx)("div",{style:{padding:24,height:450,background:n,borderRadius:8,margin:36,marginTop:0,marginBottom:24,display:"flex"},children:(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsx)(be,{yearStat:B||[]})})})]}):(0,r.jsx)("div",{style:{padding:24,height:450,borderRadius:8,margin:36,marginTop:0,marginBottom:24,display:"flex"},children:(0,r.jsxs)("div",{style:{margin:"20px auto"},children:[(0,r.jsx)("img",{src:je,width:"600px"}),(0,r.jsx)("div",{style:{textAlign:"center",margin:"40px auto",fontSize:"20px",color:"rgba(0, 0, 0, 0.65)"},children:"Explore ATUS data with me !"})]})})]})})},Oe=Ce}}]);
